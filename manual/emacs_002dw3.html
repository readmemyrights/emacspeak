<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- Created by GNU Texinfo 6.8, https://www.gnu.org/software/texinfo/ -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>emacs-w3 (Emacspeak User&rsquo;s Manual &mdash; 2nd Edition.)</title>

<meta name="description" content="emacs-w3 (Emacspeak User&rsquo;s Manual &mdash; 2nd Edition.)">
<meta name="keywords" content="emacs-w3 (Emacspeak User&rsquo;s Manual &mdash; 2nd Edition.)">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta name="viewport" content="width=device-width,initial-scale=1">

<link href="index.html" rel="start" title="Top">
<link href="Concept-Index.html" rel="index" title="Concept Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Web-Browsing.html" rel="up" title="Web Browsing">
<link href="Add_002dons.html" rel="next" title="Add-ons">
<link href="Intro.html" rel="prev" title="Intro">
<style type="text/css">
<!--
a.copiable-anchor {visibility: hidden; text-decoration: none; line-height: 0em}
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
span:hover a.copiable-anchor {visibility: visible}
ul.no-bullet {list-style: none}
-->
</style>
<link rel="stylesheet" type="text/css" href="http://www.w3.org/StyleSheets/Core/Modernist">


</head>

<body lang="en">
<div class="subsection" id="emacs_002dw3">
<div class="header">
<p>
Next: <a href="Add_002dons.html" accesskey="n" rel="next">Add-ons</a>, Previous: <a href="Intro.html" accesskey="p" rel="prev">Intro</a>, Up: <a href="Web-Browsing.html" accesskey="u" rel="up">Web Browsing</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<span id="emacs_002dw3-1"></span><h4 class="subsection">10.4.2 emacs-w3</h4>

<p>emacs/w3 is a web browser written completely in emacs lisp.  It has
some really nice features applicable to the emacspeak community such
as the ability to navigate tables and support for the w3c&rsquo;s aural
cascading stylesheets.  
</p>
<span id="emacs_002fw3-advantages"></span><h3 class="heading">emacs/w3 advantages</h3>

<p>As mentioned above, the ability to navigate tables is a super help.
emacs/w3 also has support for cascading stylesheets.  This allows
incredible control of voices used for what would normally be visual
attributes of the text such as bold, italics, preformatted text and
the like.
</p>
<p>Another advantage of emacs/w3 is that it is written completely in
emacs lisp.  With some effort, emacs/w3 is very customizable and quite
extendable.  
</p>
<span id="emacs_002fw3-disadvantages"></span><h3 class="heading">emacs/w3 disadvantages</h3>

<p>Rendering can be slow.  Sometimes it can be painfully, excruciatingly
slow.  That might be a slight exaggeration, but slow it is.  This is
because it is written in lisp... something I mentioned just above as a
strength.  It is a trade-off, but one that some see as worth it.
There are, however,  some things that can be done to speed up the browsing
process.  See
See <a href="#xsl_002dtransform"><code>emacspeak-w3-xsl-transform</code></a>,
for more information.
</p>
<p>Another disadvantage is that emacs/w3 chokes on some pages.  Sometimes
it gives error messages and doesn&rsquo;t display anything.  Sometimes it
does this to some people and doesn&rsquo;t do it to others as we saw on the
emacspeak mailing list a short time ago.  Sometimes it gives error
messages and renders the page anyway.
</p>
<p>One other major annoyance of emacs/w3 is that sometimes it simply
stops doing anything while rendering a page.  There is a way I have
found to get around this.  I hit <kbd>C-g</kbd>.  I usually wait five to ten
seconds and then simply quit, using <kbd>C-g</kbd>.  Not always, but usually,
the page has already completed downloading and is being rendered and
it therefore is not a problem.  
</p>
<p>emacs/w3 also has no bookmark functionality.  This can be remedied in
several ways.  One simple way, mentioned below, is to use the emacs
package bmk-mgr.  Another way is to use org mode with remember which
is the method used by Dr. Raman, the author of emacspeak.  See
See <a href="Add_002dons.html#bmk_002dmgr">bmk-mgr</a>, later in this manual, for more information.
</p>
<p>History back and next in the browser also seem to be broken but this
is not generally a problem for me as I never look back. 
</p>
<span id="emacs_002fw3-native-functions"></span><h3 class="heading">emacs/w3 native functions</h3>

<p>Many functions for efficient navigation of the internet are native to
emacs/w3.  Some of the most useful functions are listed below
</p>
<p>Unlike emacs-w3m, the information presented by <code>describe-mode</code> is very
complete, but a little terse.  All the function names are listed and
asking for help on particular functions works well.  That being said,
use this list to augment, not replace, the built-in help that is
available in emacs.
</p>
<p><kbd>C-f</kbd> will open a new buffer containing the cell point is in.  In most
instances, this works very well.  Imagine you are looking at a page
that is divided into 4 distinct areas: a cell at the top of the page
that contains a banner and some navigation, and a &ldquo;body&rdquo; area that is
divided into three sections consisting of more navigation, an article,
and advertisement.  If point is in the main article cell, using <kbd>C-f</kbd>
will open another buffer that contains only the text of that cell, the
article you are interested in.
</p>
<p>One caveat is that this does not always work as advertised.  Sometimes
the leftmost character of each line is missing.  At least it makes for
interesting reading.  Usually when I have this problem I simply exit
that buffer and linearize the tables in the original page.
</p>
<p>The <kbd>m</kbd> key executes a very useful command.  It will complete a link
on the page.  Imagine that you are reading through a document and you
hear a link that you need to visit.  You could tab through all the
links until you hear the one you want or you could hit the <kbd>m</kbd> key and
enter the link text at the prompt.  Completion is available and it is
not case-sensitive.  Efficient, no?
</p>
<p>The period in a cell will speak the contents of that particular cell.
This command is, in my opinion, most useful when navigating tables
with cells that have only one paragraph or less.  I tend to not read
whole articles in this manner because, inevitably, someone will
interrupt me and I will lose my place.
</p>
<p>The equals key, while in a table cell will give you the cell
information.  It tells you the row and column position, the size of
the table, and at what nesting level the table is.
</p>
<p>The pipe key, is used to read the table column.  As this command seems
to read the rectangle the column is in, this command is most useful
when used in a table where there is no column spanning, i.e. all rows
and columns are uniform.  
</p>
<p>Here is a list of table navigation commands:
</p>
<ul>
<li> <kbd>C-e +</kbd> moves to the beginning of the next table row.

</li><li> <kbd>C-e -</kbd> moves to the beginning of the previous table row. 

</li><li> <kbd>C-e &lt;</kbd> moves to the beginning of the table.

</li><li> <kbd>C-e &gt;</kbd> moves to the end of the table.

</li><li> <kbd>C-e =</kbd> moves to the top of the table column.

</li><li> <kbd>C-e &lt;DOWN&gt;</kbd> moves to the next cell down in the same column.

</li><li> <kbd>C-e &lt;UP&gt;</kbd> moves to the previous cell in the same column.

</li><li> <kbd>C-e &lt;LEFT&gt;</kbd> moves to the previous cell in the same row.

</li><li> <kbd>C-e &lt;RIGHT&gt;</kbd> moves to the next cell in the same row.
</li></ul>

<p>As you can see, table navigation in w3 can be easy and fun.
</p>
<span id="emacspeak-specific-functions-for-emacs_002fw3"></span><h3 class="heading">emacspeak specific functions for emacs/w3</h3>

<p>An incredible amount of work has been done by the emacspeak community
to make emacs/w3 accessible to those with visual impairments.  Here is
an explanation of some of those functions.
</p>
<p>The command <kbd>C-t</kbd> will toggle the visibility of table borders.  This
command might be useful where you want to hear all punctuation symbols
on a page but the table characters get in the way.
</p>
<p>The quote key will execute a command that allows you to skim the
contents of the buffer.  it will read the page,
paragraph-by-paragraph, pausing between paragraphs to prompt you to
move on by pressing <tt class="key">SPACE</tt>.  If you hit <tt class="key">SPACE</tt> in the
middle of a paragraph, it skips to the next paragraph.
</p>
<p>Another skimming command is bound to the <kbd>z</kbd> key.  This will allow you
to zip through web pages by logical blocks such as div, paragraph, and
table tags.
</p>
<p>Using the imenu facilities is another way of skimming the document and
getting to the information you desire.  imenu works especially well
for well-structured documents.  The first thing that need be done is
to copy the <samp>w3-imenu.el</samp> file from the <samp>contrib</samp> directory
of the <samp>w3</samp> directory to somewhere in your load path.  I am using
the cvs version of w3 and my w3 directory is under
<samp>/home/rdc/sourceforge</samp>.  The easiest thing to do is probably to
do an <kbd>M-x locate</kbd> and search for <samp>w3-imenu.el</samp> to see where
it is.  After locating the file, move it into your load path.  In my
case I have it under <samp>/home/rdc/share/emacs/site-lisp/</samp>.
</p>
<p>There are two ways to use the imenu facilities: automatically and
manually.  Since I do not use imenu on every site, I prefer to invoke
it manually to save the time required to build the index.  
</p>
<p>Once things are in place, invoke imenu with the <kbd>j</kbd> key.  This will ask
you for an index position.  Hitting <tt class="key">TAB</tt> will give you a list
of the possible index positions.  Another way of navigating the
document would now be to use the keys <kbd>M-n</kbd> and <kbd>M-p</kbd> to go to the next
and previous index positions.  Note that you have to build an index
for a page before you can use these commands.
</p>
<p><kbd>Cap A</kbd> and <kbd>cap R</kbd> serve the same function.  <kbd>Cap A</kbd>
browses the Atom feed at point and <kbd>cap R</kbd> browses the rss feed at
point.  This is useful to sample the feed, so to speak, before going
through the trouble of configuring your feed reader to fetch the feed.
It might also be useful to grab the headlines from a page and present
them in a more concise, readable format.  If using the sort-tables xsl
transform, there will be a link at the top of the page if there is an
rss feed available.  See See <a href="Add_002dons.html#rss">emacspeak atom and emacspeak rss</a>,
for more information. 
</p>
<p>Google provides many useful tools for web surfers.  The following
commands are useful to access much google goodness.
</p>
<p><kbd>Cap C</kbd> extracts the current page from the google cache.  With a
prefix argument it will extract the link under point.  This is useful
for those times when a particular site is down... maybe it is in the
cache... maybe it is not.  It can also be used for when particular
pages are removed from a site like in the case of a government
conspiracy.  Are we at war with Eurasia or East Asia?
</p>
<p>The slash key will search google for pages similar to the current
page.  
</p>
<p>The command <kbd>g</kbd> will do a google search restricted to the site of the
document.
</p>
<p>The <kbd>l</kbd> command googles for who links to this page.
</p>
<span id="w3-transcode"></span><p>The command <kbd>t</kbd> runs the url under point
through the google transcoder.  This is useful for sites that are
heavy on the use of tables and the xsl transforms are not helpful.  It
also works on some sites that use javascript to go to the next page in
the story, such as Reuters.  Using a prefix argument with this command
will untranscode the url under point for pages that are currently
transcoded.
</p>
<p><kbd>Cap T</kbd> will jump to the first occurrence of the title in the
document.  Multiple consecutive executions of this command will jump
to further occurrences.  This command is probably one of the most
useful timesavers while web browsing.   
</p>
<p><kbd>M-s</kbd> jumps to the &ldquo;submit&rdquo; button for the form you are editing.
</p>
<p><kbd>M-r</kbd> plays the media stream at point with the default media player. 
</p>
<p>The <kbd>y</kbd> command will rewrite the url of the url under point.  This is
useful for those sites you frequent.  Often, sites that have printer
friendly content have a specific way in which the url is written.  For
The first time you run this command in a particular buffer you are
prompted for a pattern to use.  The pattern is in the form of 
</p>
<p>&lsquo;<samp>(&quot;from string&quot; &quot;to string&quot;)</samp>&rsquo;
</p>
<p>The opening paren is supplied.  Remember to quote the strings or you
will get an error.  From this point on, until you kill the buffer in
which you wrote the rule, hitting <kbd>y</kbd> on a link will use this rewrite
rule to visit the page.  If you mistyped the rule, providing a numeric
argument will allow you to rewrite the rewrite rule.  I love
alliteration. 
</p>
<p>Saving the best for last, <kbd>e</kbd> is the xsl map prefix.  As I mentioned
in the section on emacs-w3m, xsl transforms are some powerful magic
that takes a web page and transforms it in some way.  Linearizing
tables is a good example, and the one I use most often.  
</p>
<p>The keystroke <kbd>e a</kbd> prompts for an xsl transform to apply to the
current page.  If you know the name of the particular transform you
want you can use tab completion to select it.  Otherwise, you can hit
<tt class="key">TAB</tt> to get a buffer that contains the list of choices.
</p>
<p>If you know that you want a particular transform done automatically
you can use the command <kbd>e s</kbd> to select a transform and then <kbd>e o</kbd> to
turn xslt on (the same command will turn xslt off).  Then, every page
opened from that point on will have the transform applied.
</p>
<span id="xsl_002dtransform"></span><p>There is the variable
<code>emacspeak-w3-xsl-transform</code> that can be set via the usual
methods.  This variable specifies a transform to use before displaying
a web page.  There is an advantage to turning on xsl transforms all
the time.  If you use the <samp>identity.xsl</samp>, the
<samp>linearize-tables.xsl</samp> or the <samp>sort-tables.xsl</samp> it can
actually speed up rendering of the page.  This is because the
transforms provide clean and balanced html to the renderer.
Additionally, using <samp>sort-tables.xsl</samp> or
<samp>linearize-tables.xsl</samp> will provide a little more boost as
rendering nested tables is particularly difficult for a web browser.
</p>
<p>Sometimes it is just easier to read the printer friendly version of a
story instead of having to linearize the tables and search for the
content.  Also, some sites, like the New York Times, I believe, make
you navigate several pages to read the whole story, but if you select
a &ldquo;Print this story&rdquo; link you can read the entire story on one page
formatted without a lot of the cruft on the normal page.  This is
where the <kbd>e Cap P</kbd>  command comes in.  It will extract all the print
streams from the current document.
</p>
<p>Closely associated commands are <kbd>e r</kbd> and <kbd>e Cap R</kbd> which extract the
media streams from the current page and from the link under point,
respectively.  
</p>
<p>The command <kbd>e y</kbd> is another command that is useful for frequented
sites.  It does the same as the <kbd>y</kbd> command above in that it rewrites
the url at point and follows it.  In addition, it filters the output
by a particular CSS class.  
</p>
<p>The command <kbd>e e</kbd> does more magic to the url at point.  It processes
the url using a specific function.  For example, it can be used in
retrieving radio content from the BBC.  If you execute <kbd>C-e u</kbd> and
type in <kbd>BBC Channel On Demand</kbd> or use tab completion to get the same,
and then type in <kbd>radio4</kbd> you will be presented with a page containing
a plethora of links to other pages containing information about
particular shows.  On these pages there is, somewhere, a link that
will play the program.  If you hit enter on one of the links on the
first page, you will be taken to one of these description pages.  By
using the <kbd>e e</kbd> command on a link you cut out this middle step and
proceed directly to playing the program you are interested in.
</p>
<p>If there is no executor defined for a current buffer, hitting <tt class="key">TAB</tt>
after <kbd>e e</kbd> will give you a list of possibilities to choose from.
One nice feature of this function is that it can be used for any
function.  If you cannot remember the keystroke that will play the url
under point in <code>emacspeak-m-player</code>, but you know what it is called, you
can hit <kbd>e e</kbd> and then enter the name of the function.  Nice.
</p>
<p>The <kbd>e f</kbd> command will run the current page through an XPath filter
and return the results.  For more information on XPath, see
<a href="http://en.wikipedia.org/wiki/XPath">http://en.wikipedia.org/wiki/XPath</a>.  If you wanted to see only the
links on a page, when prompted enter <kbd>//a</kbd> and you will be returned
every link on the page.  If you wanted to see only the contents of &ldquo;p&rdquo;
tags, you would enter <kbd>//p</kbd>.  This can be useful for many things, form
elements included.  Giving this command a prefix argument will reverse
the filter, giving you everything but the content of the specified tag.
</p>
<p>A related command can be invoked with the <kbd>e p</kbd> keystroke.  This
command does the same as the filter above but works on the url under
point. 
</p>
<span id="emacs_002fw3-tips-and-tricks"></span><h3 class="heading">emacs/w3 tips and tricks</h3>

<p>As I mentioned above, using <kbd>C-g</kbd> when it seems the browser is not
responding will often display the page with no ill effects.  Your
mileage may vary.  Taxes, tags and title are extra.
</p>
<p>Also mentioned above is the use of sort-tables or identity as an xsl
transform to speed up the rendering of pages.  Every little bit
helps. 
</p>
<p>Another useful tip is the use of the <kbd>k</kbd> key.  This key will place the
current url in the kill-ring for later yanking.  If a page will not
render correctly, using <kbd>k</kbd> will get the url and allow me to pass it
to emacs-w3m.  The counterpart to this command, <kbd>cap K</kbd> puts the url
under point in the kill-ring.
</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Add_002dons.html">Add-ons</a>, Previous: <a href="Intro.html">Intro</a>, Up: <a href="Web-Browsing.html">Web Browsing</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Concept-Index.html" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
